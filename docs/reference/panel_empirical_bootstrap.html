<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Panel Empirical Bootstrap — panel_empirical_bootstrap • ptetools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Panel Empirical Bootstrap — panel_empirical_bootstrap"><meta name="description" content="Computes empirical bootstrap pointwise standard errors"><meta property="og:description" content="Computes empirical bootstrap pointwise standard errors"><meta property="og:image" content="https://github.com/bcallaway11/ptetools/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ptetools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="https://github.com/bcallaway11/ptetools"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Panel Empirical Bootstrap</h1>
      <small class="dont-index">Source: <a href="https://github.com/bcallaway11/ptetools/blob/HEAD/R/empirical_bootstrap.R"><code>R/empirical_bootstrap.R</code></a></small>
      <div class="d-none name"><code>panel_empirical_bootstrap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes empirical bootstrap pointwise standard errors</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">panel_empirical_bootstrap</span><span class="op">(</span></span>
<span>  <span class="va">attgt.list</span>,</span>
<span>  <span class="va">ptep</span>,</span>
<span>  <span class="va">setup_pte_fun</span>,</span>
<span>  <span class="va">subset_fun</span>,</span>
<span>  <span class="va">attgt_fun</span>,</span>
<span>  <span class="va">extra_gt_returns</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-attgt-list">attgt.list<a class="anchor" aria-label="anchor" href="#arg-attgt-list"></a></dt>
<dd><p>list of attgt results from <code>compute.pte</code></p></dd>


<dt id="arg-ptep">ptep<a class="anchor" aria-label="anchor" href="#arg-ptep"></a></dt>
<dd><p><code>pte_params</code> object</p></dd>


<dt id="arg-setup-pte-fun">setup_pte_fun<a class="anchor" aria-label="anchor" href="#arg-setup-pte-fun"></a></dt>
<dd><p>This is a function that should take in <code>data</code>,
<code>yname</code> (the name of the outcome variable in <code>data</code>),
<code>gname</code> (the name of the group variable),
<code>idname</code> (the name of the id variable),
and possibly other arguments such as the significance level <code>alp</code>,
the number of bootstrap iterations <code>biters</code>, and how many clusters
for parallel computing in the bootstrap <code>cl</code>.  The key thing that
needs to be figured out in this function is which groups and time periods
ATT(g,t) should be computed in.  The function should
return a <code>pte_params</code> object which contains all of the parameters
passed into the function as well as <code>glist</code> and <code>tlist</code> which
should be ordered lists of groups and time periods for ATT(g,t) to be computed.</p>
<p>This function provides also provides a good place for error handling related
to the types of data that can be handled.</p>
<p>The <code>pte</code> package contains the function <code>setup_pte</code> that is
a lightweight function that basically just takes the data, omits
the never-treated group from <code>glist</code> but includes all other groups
and drops the first time period.  This works in cases where ATT would
be identified in the 2x2 case (i.e., where there are two time periods,
no units are treated in the first period and the identification strategy
"works" with access to a treated and untreated group and untreated
potential outcomes for both groups in the first period) — for example,
this approach works if DID is the identification strategy.</p></dd>


<dt id="arg-subset-fun">subset_fun<a class="anchor" aria-label="anchor" href="#arg-subset-fun"></a></dt>
<dd><p>This is a function that should take in <code>data</code>,
<code>g</code> (for group), <code>tp</code> (for time period), and <code>...</code>
and be able to return the appropriate <code>data.frame</code> that can be used
by <code>attgt_fun</code> to produce ATT(g=g,t=tp).  The data frame should
be constructed using <code>gt_data_frame</code> in order to guarantee that
it has the appropriate columns that identify which group an observation
belongs to, etc.</p></dd>


<dt id="arg-attgt-fun">attgt_fun<a class="anchor" aria-label="anchor" href="#arg-attgt-fun"></a></dt>
<dd><p>This is a function that should work in the case where
there is a single group and the "right" number of time periods to
recover an estimate of the ATT.  For example, in the contest of
difference in differences, it would need to work for a single group,
find the appropriate comparison group (untreated units), find the right
time periods (pre- and post-treatment), and then recover an estimate
of ATT for that group.  It will be called over and over separately
by groups and by time periods to compute ATT(g,t)'s.</p>
<p>The function needs to work in a very specific way.  It should take in the
arguments: <code>data</code>, <code>...</code>.  <code>data</code> should be constructed
using the function <code>gt_data_frame</code> which checks to make sure
that <code>data</code> has the correct columns defined.
<code>...</code> are additional arguments (such as
formulas for covariates) that <code>attgt_fun</code> needs.  From these arguments
<code>attgt_fun</code> must return a list with element <code>ATT</code> containing the
group-time average treatment effect for that group and that time period.</p>
<p>If <code>attgt_fun</code> returns an influence function (which should be provided
in a list element named <code>inf_func</code>), then the code will use the
multiplier bootstrap to compute standard errors for group-time average
treatment effects, an overall treatment effect parameter, and a dynamic
treatment effect parameter (i.e., event study parameter).  If
<code>attgt_fun</code> does not return an influence function, then the same
objects will be computed using the empirical bootstrap.  This is usually
(perhaps substantially) easier to code, but also will usually be (perhaps
substantially) computationally slower.</p></dd>


<dt id="arg-extra-gt-returns">extra_gt_returns<a class="anchor" aria-label="anchor" href="#arg-extra-gt-returns"></a></dt>
<dd><p>A place to return anything extra from particular
group-time average treatment effect calculations.  For DID, this might
be something like propensity score estimates, regressions of untreated
potential outcomes on covariates.  For ife, this could be something
like the first step regression 2sls estimates.  This argument is also
potentially useful for debugging.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>extra arguments that can be passed to create the correct subsets
of the data (depending on <code>subset_fun</code>), to estimate group time
average treatment effects (depending on <code>attgt_fun</code>), or to
aggregating treatment effects (particularly useful are <code>min_e</code>,
<code>max_e</code>, and <code>balance_e</code> arguments to event study aggregations)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>pte_emp_boot</code> object</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brantly Callaway.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

